<% if user_signed_in? %>
  <div data-controller="map">
    <div data-map-target="map" class="w-full h-96 border border-gray-300 rounded"></div>

    <div class="space-y-8">
      <div>
        <h2 class="text-2xl font-bold mb-4">Add a Place</h2>
        <form data-action="submit->map#addPlace" class="space-y-4">
          <div>
            <label for="placeName" class="block text-sm font-medium text-gray-700">Place Name</label>
            <input type="text" id="placeName" data-map-target="placeName" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm" required>
          </div>
          <div>
            <label for="placeLatitude" class="block text-sm font-medium text-gray-700">Latitude</label>
            <input type="text" id="placeLatitude" data-map-target="placeLatitude" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm" required>
          </div>
          <div>
            <label for="placeLongitude" class="block text-sm font-medium text-gray-700">Longitude</label>
            <input type="text" id="placeLongitude" data-map-target="placeLongitude" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm" required>
          </div>
          <button type="submit" class="w-full bg-gray-900 text-white py-2 px-4 rounded-md hover:bg-gray-700">Add Place</button>
        </form>
      </div>

      <div>
        <h2 class="text-2xl font-bold mb-4">Add a List</h2>
        <form data-action="submit->map#addList" class="space-y-4">
          <div>
            <label for="listName" class="block text-sm font-medium text-gray-700">List Name</label>
            <input type="text" id="listName" data-map-target="listName" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm" required>
          </div>
          <button type="submit" class="w-full bg-gray-900 text-white py-2 px-4 rounded-md hover:bg-gray-700">Add List</button>
        </form>
      </div>

      <div>
        <h2 class="text-2xl font-bold mb-4">Your Lists</h2>
        <ul data-map-target="lists" class="space-y-2">
          <!-- Lists will be populated here -->
        </ul>
      </div>
    </div>
  </div>
<% else %>
  <div class="text-center mt-20">
    <p class="text-xl">Please <%= link_to 'login', new_user_session_path, class: 'text-gray-900 hover:underline' %> or <%= link_to 'sign up', new_user_registration_path, class: 'text-gray-900 hover:underline' %> to manage your places and lists.</p>
  </div>
<% end %>
